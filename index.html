<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS2 Stream Overlay</title>
    <!-- Tailwind CSS for a modern utility-first approach -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Import a clean, modern font that matches the CS2 feel */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: transparent; /* This line makes the entire page background transparent like a PNG. */
            overflow: hidden;
            color: #E2E8F0; /* Light text for high contrast */
        }

        .overlay-container {
            width: 100vw;
            height: 100vh;
            position: relative;
        }

        .card {
            /* Increased opacity for better visibility in bright scenes */
            background-color: rgba(30, 41, 59, 0.7); /* slate-800 with higher opacity */
            border-radius: 0.75rem; /* rounded-xl */
            padding: 14px; /* The requested padding has been applied here. */
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.5); /* Stronger shadow for depth */
            border: 2px solid rgba(45, 212, 191, 0.8); /* A more opaque teal border */
            backdrop-filter: blur(8px); /* A more noticeable blur effect */
            transition: all 0.3s ease-in-out;
            display: flex;
            align-items: center;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.6);
        }

        /* The text-shadow property creates a clean outline for better readability in-game. */
        .text-outline {
            text-shadow: 
                -1px -1px 0 #000,  
                1px -1px 0 #000,
                -1px 1px 0 #000,
                1px 1px 0 #000;
        }

        .highlight-text {
            color: #FF5500; /* A crisp orange for highlights */
            font-weight: bold;
        }
    </style>
</head>
<body class="bg-transparent overflow-hidden">

    <div class="overlay-container">

        <!-- Left-side content, now positioned with left-4 to fill from left to right -->
        <div class="absolute left-4 top-1/2 -translate-y-1/2 flex flex-col space-y-8">
            
            <!-- YouTube Subscribers Box -->
            <div id="youtube-subs-box" class="w-full max-w-2xl">
                <div class="card flex items-center justify-between">
                    <span class="text-base font-bold uppercase text-outline">Subscribers:</span>
                    <div class="flex items-center">
                        <span id="youtube-count" class="ml-2 text-base font-bold highlight-text uppercase text-outline">0</span>
                        <span class="text-base font-bold uppercase text-outline">/</span>
                        <span id="youtube-goal" class="text-base uppercase text-outline">80</span>
                    </div>
                </div>
            </div>

            <!-- Recent Follower Box -->
            <div id="recent-follower-box" class="w-full max-w-2xl">
                <div class="card flex flex-col items-center justify-between">
                    <div class="flex items-center w-full justify-between">
                        <span class="text-base font-bold uppercase text-outline">Recent Follower:</span>
                        <span id="recent-follower-name" class="ml-2 text-base font-bold highlight-text uppercase max-w-xl overflow-hidden whitespace-nowrap text-ellipsis min-w-[150px] text-outline"></span>
                    </div>
                    <span class="text-xs uppercase mt-1 text-outline" style="color: #37BFB0;">Followers only visible if profile is public</span>
                </div>
            </div>

            <!-- Faceit ELO -->
            <div id="faceit-elo-box" class="w-full max-w-2xl">
                <div class="card flex items-center justify-between">
                    <div class="flex items-center">
                        <span class="text-base font-bold uppercase text-outline">Level:</span>
                        <span id="elo-level" class="ml-2 text-base font-bold highlight-text uppercase text-outline">0</span>
                    </div>
                    <div class="flex items-center">
                        <span class="text-base font-bold uppercase text-outline">ELO:</span>
                        <span id="elo-value" class="ml-2 text-base font-bold highlight-text uppercase text-outline">0</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- CONFIGURATION SECTION ---

        // IMPORTANT: Replace with the URL of your deployed YouTube Count Worker.
        const YOUTUBE_COUNT_WORKER_URL = 'https://youtube-count.darms1er.workers.dev';
        // IMPORTANT: Replace with your actual YouTube Channel ID.
        const YOUTUBE_CHANNEL_ID = 'UC_uN3iaa1OZxpQ05Fl-dhgA';
        // Your subscriber goal (e.g., 100, 500, etc.)
        const SUBSCRIBER_GOAL = 80;

        // IMPORTANT: Replace with the URL of your deployed Faceit Worker.
        const FACEIT_WORKER_URL = 'https://faceit-elo.darms1er.workers.dev';
        // IMPORTANT: Replace with your actual FACEIT Player ID.
        const FACEIT_PLAYER_ID = '57280df3-9f9c-464e-bca9-e943c5d037f0';
        
        // Set a refresh rate in milliseconds. 30000 (30 seconds) is a good balance.
        const REFRESH_RATE = 30000; 

        // --- DO NOT MODIFY BELOW THIS LINE UNLESS YOU KNOW WHAT YOU ARE DOING ---

        // Function to fetch the YouTube subscriber count
        const fetchYouTubeCount = async () => {
            if (YOUTUBE_COUNT_WORKER_URL === 'https://your-youtube-count-worker.workers.dev' && YOUTUBE_CHANNEL_ID === 'UC_uN3iaa1OZxpQ05Fl-dhgA') {
                document.getElementById('youtube-count').textContent = 'N/A';
                console.warn("Please update the YouTube worker URL and channel ID.");
                return;
            }

            const url = `${YOUTUBE_COUNT_WORKER_URL}?channelId=${YOUTUBE_CHANNEL_ID}`;
            try {
                const response = await fetch(url);
                const data = await response.json();
                
                if (response.ok && data.subscriberCount) {
                    document.getElementById('youtube-count').textContent = data.subscriberCount;
                    document.getElementById('youtube-goal').textContent = SUBSCRIBER_GOAL;
                } else {
                    throw new Error(data.error || 'Failed to fetch YouTube count.');
                }
            } catch (error) {
                console.error("Could not fetch YouTube count:", error);
                document.getElementById('youtube-count').textContent = 'N/A';
            }
        };

        // Function to fetch Faceit ELO and Level
        const fetchFaceitData = async () => {
            if (FACEIT_WORKER_URL === 'https://your-faceit-worker.workers.dev' || FACEIT_PLAYER_ID === 'PLEASE_REPLACE_WITH_YOUR_ID') {
                document.getElementById('elo-value').textContent = 'N/A';
                document.getElementById('elo-level').textContent = 'N/A';
                console.warn("Please update the FACEIT worker URL and Player ID.");
                return;
            }

            // The API URL now points to your secure Cloudflare Worker
            const apiUrl = `${FACEIT_WORKER_URL}/${FACEIT_PLAYER_ID}`;

            try {
                const response = await fetch(apiUrl);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                
                const elo = data.games.cs2.faceit_elo || 0;
                const level = data.games.cs2.skill_level || 0;

                document.getElementById('elo-value').textContent = elo;
                document.getElementById('elo-level').textContent = level;

            } catch (error) {
                console.error("Could not fetch Faceit ELO:", error);
                document.getElementById('elo-value').textContent = 'N/A';
                document.getElementById('elo-level').textContent = 'N/A';
            }
        };

        // Fetch data on page load and then set an interval for periodic updates
        document.addEventListener('DOMContentLoaded', () => {
            fetchYouTubeCount();
            fetchFaceitData();
            
            // Set intervals for periodic updates
            setInterval(fetchYouTubeCount, REFRESH_RATE);
            setInterval(fetchFaceitData, REFRESH_RATE);
        });
    </script>
</body>
</html>
